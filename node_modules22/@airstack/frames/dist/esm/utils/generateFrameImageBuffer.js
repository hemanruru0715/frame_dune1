import satori from "satori";
import sharp from "sharp";
import { Resvg } from "@resvg/resvg-js";
import { OUTPUT_FRAME_QUALITY, OUTPUT_FRAME_WIDTH } from "../constants";
export async function getFrameImageBuffer(element, satoriOptions, outputOptions) {
    const svg = await satori(element, satoriOptions);
    const renderer = new Resvg(svg, {
        fitTo: { mode: "width", value: (outputOptions === null || outputOptions === void 0 ? void 0 : outputOptions.width) || OUTPUT_FRAME_WIDTH },
    });
    const pngBuffer = renderer.render().asPng();
    return sharp(pngBuffer)
        .jpeg({ quality: (outputOptions === null || outputOptions === void 0 ? void 0 : outputOptions.quality) || OUTPUT_FRAME_QUALITY })
        .toBuffer();
}
//# sourceMappingURL=generateFrameImageBuffer.js.map