import { useRef, useMemo, Children, useEffect } from 'react';
import { ConnectWallet } from './ConnectWallet.js';
import { WalletDropdown } from './WalletDropdown.js';
import { useWalletContext, WalletProvider } from './WalletProvider.js';
import { jsxs, jsx } from 'react/jsx-runtime';
const WalletContent = ({
  children
}) => {
  const _useWalletContext = useWalletContext(),
    isOpen = _useWalletContext.isOpen,
    setIsOpen = _useWalletContext.setIsOpen;
  const walletContainerRef = useRef(null);
  const _useMemo = useMemo(() => {
      const childrenArray = Children.toArray(children);
      return {
        // @ts-ignore
        connect: childrenArray.filter(({
          type
        }) => type === ConnectWallet),
        // @ts-ignore
        dropdown: childrenArray.filter(({
          type
        }) => type === WalletDropdown)
      };
    }, [children]),
    connect = _useMemo.connect,
    dropdown = _useMemo.dropdown;

  // Handle clicking outside the wallet component to close the dropdown.
  useEffect(() => {
    const handleClickOutsideComponent = event => {
      if (walletContainerRef.current && !walletContainerRef.current.contains(event.target) && isOpen) {
        setIsOpen(false);
      }
    };
    document.addEventListener('click', handleClickOutsideComponent);
    return () => document.removeEventListener('click', handleClickOutsideComponent);
  }, [isOpen, setIsOpen]);
  return /*#__PURE__*/jsxs("div", {
    ref: walletContainerRef,
    className: "relative w-fit shrink-0",
    children: [connect, isOpen && dropdown]
  });
};
const Wallet = ({
  children
}) => {
  return /*#__PURE__*/jsx(WalletProvider, {
    children: /*#__PURE__*/jsx(WalletContent, {
      children: children
    })
  });
};
export { Wallet };
//# sourceMappingURL=Wallet.js.map
